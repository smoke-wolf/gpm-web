

<!DOCTYPE html>
<html>
<head>
  <title>♨︎Tungsten Client♨︎</title>
  <link rel="stylesheet" type="text/css" href="web.css">
  <link rel="stylesheet" type="text/css" href="admin.css">
 <style>
    /* Add your custom styles here to make it smoother and more interactive */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* Style for the container */
    #container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Style for the buttons */
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    /* Style for the profile and admin buttons */
    #profileButton,
    #adminButton {
      margin-bottom: 10px;
    }

    /* Style for the header */
    h1 {
      margin-top: 20px;
      margin-bottom: 30px;
      font-size: 24px;
    }

    /* Style for the search container */
    #searchContainer {
      display: flex;
      margin-bottom: 20px;
    }

    /* Style for the search input */
    #searchInput {
      flex-grow: 1;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
    }

    /* Style for the filter input */
    #filterInput {
      flex-shrink: 0;
      margin-left: 10px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
    }

    /* Style for the search button */
    #searchButton {
      flex-shrink: 0;
      margin-left: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
    }

    /* Style for the results */
    #results {
      margin-bottom: 20px;
    }

    /* Style for the repository list */
    #repositoryList {
      list-style: none;
      padding: 0;
    }

    /* Style for each repository item */
    .repository {
      padding: 10px;
      border-bottom: 1px solid #ccc;
      cursor: pointer;
    }

    /* Hover style for repository items */
    .repository:hover {
      background-color: #f5f5f5;
    }

    /* Style for the repository header */
    .repository-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    /* Style for the arrow icon */
    .arrow-icon {
      width: 10px;
      height: 10px;
      background-color: black;
      transform: rotate(45deg);
      transition: transform 0.3s;
    }

    /* Style for the expanded arrow icon */
    .expanded .arrow-icon {
      transform: rotate(-135deg);
    }

    /* Style for the readme content */
    .readme-content {
      display: none;
      margin-top: 10px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    /* Style for the expanded readme content */
    .expanded .readme-content {
      display: block;
    }

    /* Style for the profile and admin sections */
    #profile,
    #admin {
      margin-top: 20px;
    }

    /* Style for the profile settings */
    #profile h2,
    #admin h2 {
      margin-bottom: 10px;
      font-size: 20px;
    }

    /* Style for the profile input */
    #profileInput {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
    }

    /* Style for the save button */
    #saveButton,
    #adminSaveButton {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    /* Style for the admin dashboard items */
    .dashboard-item {
      margin-bottom: 10px;
    }

    /* Style for the dashboard labels */
    .dashboard-item label {
      font-weight: bold;
    }

    /* Style for the dashboard lists */
    .dashboard-item ul {
      list-style: none;
      padding: 0;
    }

    /* Style for the dashboard list items */
    .dashboard-item li {
      margin-bottom: 5px;
    }

    /* Style for the readme modal */
    #readmeModal {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
    }
    
   
   
    /* Style for the readme modal content */
    #readmeModal .modal-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 10% auto;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 80%;
      max-width: 600px;
      max-height: 80%;
      overflow: auto;
    }

    /* Style for the close button in the readme modal */
    #readmeModal .close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 30px;
      font-weight: bold;
      color: #000;
      cursor: pointer;
    }
    
    /* Media query for responsiveness */
    @media screen and (max-width: 600px) {
      #container {
        padding: 10px;
      }

    /* Style for the password prompt */
    #admin {
      display: none;
    }

    /* Style for the password prompt header */
    #admin h2 {
      margin-bottom: 10px;
      font-size: 20px;
    }

    /* Style for the password input */
    #adminInput {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
    }

    /* Style for the save button in the password prompt */
    #adminSaveButton {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    /* Style for the error message */
    .error-message {
      color: red;
      margin-top: 5px;
    /* Style for the connected IPs list */
    #connectedIPs {
      list-style: none;
      padding: 0;
    }

    /* Style for each IP item */
    .ip-item {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <div id="container">
    <button id="profileButton">Profile</button>
    <button id="adminButton">Admin</button>
    <h1>♨︎Tungsten Client♨︎</h1>

    <div id="searchContainer">
      <input type="text" id="searchInput" placeholder="Search repositories">
      <select id="filterInput">
        <option value="none">No Filter</option>
        <option value="user">User</option>
        <option value="recent">Recent</option>
        <option value="stars">Stars</option>
        <option value="downloads">Downloads</option>
      </select>
      <button id="searchButton">Search</button>
    </div>

    <div id="results">
      <ul id="repositoryList"></ul>
    </div>

    <div id="profile" style="display: none;">
      <h2>Profile Settings</h2>
      <label for="profileInput">Profile URL:</label>
      <input type="text" id="profileInput" placeholder="Enter profile URL">
      <button id="saveButton">Save</button>
    </div>

    <div id="admin" style="display: none;">
      <h2>Admin Dashboard</h2>
      <label for="adminInput">Enter Password:</label>
      <input type="password" id="adminInput" placeholder="Password">
      <button id="adminSaveButton">Log In</button>
      <div id="dashboard" style="display: none;">
        <div class="dashboard-item">
          <label>Total Searches:</label>
          <span id="siteVisits"></span>
        </div>
        <div class="dashboard-item">
          <label>Viewed Repositories:</label>
          <ul id="viewedReposList"></ul>
        </div>
        <div class="dashboard-item">
          <label>Connected IPs:</label>
          <ul id="connectedIPs"></ul>
        </div>
      </div>
    </div>
  </div>

  <script src="web.js"></script>
  <script>
    
   var allSearches = [];
    var siteVisitsCount = parseInt(localStorage.getItem("siteVisitsCount")) || 0;
    var viewedRepos = [];
    var connectedIPs = [];

    function updateSiteVisitsCount(searchQuery) {
  siteVisitsCount++;
  document.getElementById("siteVisits").textContent = siteVisitsCount;
  localStorage.setItem("siteVisitsCount", siteVisitsCount);

  allSearches.push(searchQuery);
}


var siteVisitsCount = parseInt(localStorage.getItem("siteVisitsCount")) || 0;
var viewedRepos = JSON.parse(localStorage.getItem("viewedRepos")) || [];
var connectedIPs = [];

    var siteVisitsCount = parseInt(localStorage.getItem("siteVisitsCount")) || 0;
var viewedRepos = JSON.parse(localStorage.getItem("viewedRepos")) || [];
var connectedIPs = [];
document.getElementById("searchButton").addEventListener("click", function() {
  var searchInput = document.getElementById("searchInput").value;
  var filterInput = document.getElementById("filterInput").value;
  var xhr = new XMLHttpRequest();

  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
      var response = JSON.parse(xhr.responseText);
      var filteredResults = filterResults(response.items, filterInput);
      displayResults(filteredResults);
      updateSiteVisitsCount(); // Increment site visits count on search
      updateSearches(searchInput); // Update searches list
    }
  };

  xhr.open("GET", "https://api.github.com/search/repositories?q=" + searchInput, true);
  xhr.send();
});
function updateSiteVisitsCount() {
  siteVisitsCount++;
  document.getElementById("siteVisits").textContent = siteVisitsCount;
  localStorage.setItem("siteVisitsCount", siteVisitsCount);
}


function updateViewedRepos(repository, readmeContent) {
  // Check if the repository already exists in the viewedRepos array
  var existingRepo = viewedRepos.find(function(repo) {
    return repo.repository === repository;
  });

  if (existingRepo) {
    // If the repository exists, increment the visit count
    existingRepo.visits += 1;
  } else {
    // Otherwise, add a new entry with visit count initialized to 1
    viewedRepos.push({
      repository: repository,
      visits: 1,
      readme: readmeContent
    });
  }

  localStorage.setItem("viewedRepos", JSON.stringify(viewedRepos));
  var viewedReposList = document.getElementById("viewedReposList");
  viewedReposList.innerHTML = ""; // Clear the list before populating

  viewedRepos.forEach(function(repo) {
    var listItem = document.createElement("li");
    listItem.textContent = repo.repository + " (" + repo.visits + " visits)";
    viewedReposList.appendChild(listItem);
  });
}

// Rest of the code...


    function updateConnectedIPs(ip, deviceType) {
      // Check if the IP already exists in the connectedIPs array
      var existingIP = connectedIPs.find(function(item) {
        return item.ip === ip;
      });

      if (existingIP) {
        // If the IP exists, increment the visit count and update the device type
        existingIP.visits += 1;
        existingIP.deviceType = deviceType;
      } else {
        // Otherwise, add a new entry with visit count initialized to 1
        connectedIPs.push({
          ip: ip,
          visits: 1,
          deviceType: deviceType
        });
      }

      var connectedIPsList = document.getElementById("connectedIPs");
      connectedIPsList.innerHTML = ""; // Clear the list before populating

      connectedIPs.forEach(function(item) {
        var listItem = document.createElement("li");
        listItem.className = "ip-item";
        listItem.textContent = item.ip + " (" + item.deviceType + ", " + item.visits + " visits)";
        connectedIPsList.appendChild(listItem);
      });
    }

    function displayAdminDashboard() {
  document.getElementById("adminInput").value = "";
  document.getElementById("admin").style.display = "none";
  document.getElementById("dashboard").style.display = "block";

  var viewedReposList = document.getElementById("viewedReposList");
  viewedReposList.innerHTML = ""; // Clear the list before populating

  viewedRepos.forEach(function (repo) {
    var listItem = document.createElement("li");
    listItem.textContent = repo.repository + " (" + repo.visits + " visits)";
    viewedReposList.appendChild(listItem);
  });

  var allSearchesList = document.getElementById("allSearchesList");
  allSearchesList.innerHTML = ""; // Clear the list before populating
  
     
  allSearches.forEach(function (search) {
    var listItem = document.createElement("li");
    listItem.textContent = search;
    allSearchesList.appendChild(listItem);
  });
}

function updateSearches(searchQuery) {
  searches.push(searchQuery);
  var searchesList = document.getElementById("searchesList");
  var listItem = document.createElement("li");
  listItem.textContent = searchQuery;
  searchesList.appendChild(listItem);
}


    function checkAdminPassword() {
      var password = document.getElementById("adminInput").value;
      if (password === "admin_user") {
        displayAdminDashboard();
      } else {
        alert("Invalid password. Please try again.");
      }
    }

    document.getElementById("adminButton").addEventListener("click", function() {
      document.getElementById("admin").style.display = "block";
    });

document.getElementById("adminSaveButton").addEventListener("click", function() {
  checkAdminPassword();
});

    document.getElementById("searchButton").addEventListener("click", function() {
      var searchInput = document.getElementById("searchInput").value;
      var filterInput = document.getElementById("filterInput").value;
      var xhr = new XMLHttpRequest();

      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var response = JSON.parse(xhr.responseText);
          var filteredResults = filterResults(response.items, filterInput);
          displayResults(filteredResults);
          updateSiteVisitsCount(); // Increment site visits count on search
        }
      };

      xhr.open("GET", "https://api.github.com/search/repositories?q=" + searchInput, true);
      xhr.send();
    });

    function filterResults(repositories, filterInput) {
      if (filterInput === "user") {
        return repositories.sort(function(a, b) {
          return a.owner.login.localeCompare(b.owner.login);
        });
      } else if (filterInput === "recent") {
        return repositories.sort(function(a, b) {
          var dateA = new Date(a.updated_at);
          var dateB = new Date(b.updated_at);
          return dateB - dateA;
        });
      } else if (filterInput === "stars") {
        return repositories.sort(function(a, b) {
          return b.stargazers_count - a.stargazers_count;
        });
      } else if (filterInput === "downloads") {
        return repositories.sort(function(a, b) {
          return b.downloads_count - a.downloads_count;
        });
      } else {
        return repositories;
      }
    }

    function displayResults(repositories) {
      var repositoryList = document.getElementById("repositoryList");
      repositoryList.innerHTML = "";

      repositories.forEach(function(repository) {
        var listItem = document.createElement("li");
        listItem.className = "repository";

        var header = document.createElement("div");
        header.className = "repository-header";

        var repoLink = document.createElement("a");
        repoLink.href = repository.html_url;
        repoLink.textContent = repository.full_name;

        var description = document.createElement("p");
        description.textContent = repository.description;

        var arrowIcon = document.createElement("span");
        arrowIcon.className = "arrow-icon";

        header.appendChild(repoLink);
        header.appendChild(description);
        header.appendChild(arrowIcon);

        var readmeContent = document.createElement("div");
        readmeContent.className = "readme-content";

        listItem.appendChild(header);
        listItem.appendChild(readmeContent);

        listItem.addEventListener("click", function() {
          toggleReadmeContent(readmeContent, repository.owner.login, repository.name);
          updateViewedRepos(repository.full_name); // Update viewed repositories
        });

        repositoryList.appendChild(listItem);
      });
    }
    
    function toggleReadmeContent(contentElement, owner, repo) {
  if (contentElement.classList.contains("expanded")) {
    contentElement.innerHTML = "";
    contentElement.classList.remove("expanded");
  } else {
    contentElement.innerHTML = "<em>Loading README...</em>";

    // Fetch the README content
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          contentElement.innerHTML = xhr.responseText;
          updateViewedRepos(`${owner}/${repo}`, xhr.responseText); // Update viewed repositories
        } else {
          contentElement.innerHTML = "<em>Failed to load README.</em>";
        }
      }
    };

    xhr.open("GET", `https://api.github.com/repos/${owner}/${repo}/readme`, true);
    xhr.setRequestHeader("Accept", "application/vnd.github.VERSION.html");
    xhr.send();

    contentElement.classList.add("expanded");
  }
}


    document.addEventListener("DOMContentLoaded", function() {
      var modal = document.getElementById("readmeModal");
      var closeModal = document.getElementsByClassName("close")[0];
      adminButton.addEventListener("click", () => {
  clearRepositories();
  displayAdminSection();
});

function clearRepositories() {
  const repositoryList = document.getElementById("repositoryList");
  repositoryList.innerHTML = "";
}

      closeModal.addEventListener("click", function() {
        modal.style.display = "none";
      });

      window.addEventListener("click", function(event) {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>
